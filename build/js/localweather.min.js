/*! localweather 2017-02-25 */
function locationRequest(){$.ajax({url:"http://ip-api.com/json/",dataType:"jsonp",success:function(a){console.log(a),lat=a.lat,lon=a.lon,weatherRequest()}})}function weatherRequest(){var a="metric";$.ajax({url:"http://api.openweathermap.org/data/2.5/weather?lat="+lat+"&lon="+lon+"&units="+a+"&appid=6a98c6183cbd635f197b040460d18089",dataType:"jsonp",success:function(a){console.log(a);var b=a.weather[0].main,c=Math.round(Number(a.main.temp)),d=a.name,e="http://openweathermap.org/img/w/"+a.weather[0].icon+".png",f=getWindDirection(a.wind.deg)+" "+a.wind.speed;$("#location").html(d),$("#icon").prepend('<img id="theImg" src="'+e+'" />'),$("#temperature").html(c),$("#sky").html(b),$("#wind").html(f),setBackground()}})}function setBackground(){var a="thunderstorm",b="url('img/"+a+".jpg')";document.body.style.backgroundImage=b}function getWindDirection(a){if(a<0||a>360)return"";var b=Math.floor(a/22.5+.5),c=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];return c[b%16]}locationRequest(),$("#button").click(function(){weatherRequest()});