/*! localweather 2017-02-25 */
function locationRequest(){$.ajax({url:"http://ip-api.com/json/",dataType:"jsonp",success:function(a){console.log(a),lat=a.lat,lon=a.lon,units="metric",displayTempUnits="<span class='units'>&#8451<span>",displayWindUnits="meter/sec","United States"!=a.country&&"Liberia"!=a.country&&"Myanmar [Burma]"!=a.country||(units="imperial",displayTempUnits="<span class='units'>&#8457<span>",displayWindUnits="miles/hour"),weatherRequest()}})}function weatherRequest(){$.ajax({url:"http://api.openweathermap.org/data/2.5/weather?lat="+lat+"&lon="+lon+"&units="+units+"&appid=6a98c6183cbd635f197b040460d18089",dataType:"jsonp",success:function(a){console.log(a);var b=a.weather[0].main,c=String(Math.round(Number(a.main.temp)))+displayTempUnits,d=a.weather[0].description,e=a.name,f="http://openweathermap.org/img/w/"+a.weather[0].icon+".png",g=getWindDirection(a.wind.deg)+" "+a.wind.speed+" "+displayWindUnits;$("#location").html(e),$("#icon").prepend('<img id="theImg" src="'+f+'" />'),$("#temperature").html(c),$("#sky").html(b),$("#description").html(d),$("#wind").html(g),setBackground()}})}function setBackground(){var a="thunderstorm",b="url('img/"+a+".jpg')";document.body.style.backgroundImage=b}function getWindDirection(a){if(a<0||a>360)return"";var b=Math.floor(a/22.5+.5),c=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];return c[b%16]}locationRequest(),$("#button").click(function(){weatherRequest()});