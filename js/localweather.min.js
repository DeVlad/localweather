/*! localweather 2017-03-02 */
function locationRequest(){$.ajax({url:"https://ip.nf/me.json",dataType:"jsonp",success:function(a){lat=a.ip.latitude,lon=a.ip.longitude,units="metric",displayTempUnits="<span class='units'>&#8451<span>",displayWindUnits="meter/sec","United States"!=a.ip.country&&"Liberia"!=a.ip.country&&"Myanmar"!=a.ip.country||(units="imperial",displayTempUnits="<span class='units'>&#8457<span>",displayWindUnits="miles/hour"),weatherRequest()}})}function weatherRequest(){$.ajax({url:"http://api.openweathermap.org/data/2.5/weather?lat="+lat+"&lon="+lon+"&units="+units+"&appid=6a98c6183cbd635f197b040460d18089",dataType:"jsonp",success:function(a){setBackground(a.weather[0].id);var b=a.weather[0].main,c=String(Math.round(Number(a.main.temp)))+displayTempUnits,d=a.weather[0].description,e=a.name,f="http://openweathermap.org/img/w/"+a.weather[0].icon+".png",g="";g=void 0!==a.wind.deg?getWindDirection(a.wind.deg)+" "+a.wind.speed+" "+displayWindUnits:a.wind.speed+" "+displayWindUnits,$("#location").html(e),$("#icon").prepend('<img id="theImg" src="'+f+'" />'),$("#temperature").html(c),$("#sky").html(b),$("#description").html(d),$("#wind").html(g)}})}function getWindDirection(a){if(a<0||a>360)return"";var b=Math.floor(a/22.5+.5),c=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];return c[b%16]}function setBackground(a){var b="default";800==a&&(b="clear-sky"),a>=300&&a<=531?b="rain":a>=801&&a<=804?(801==a&&(b="few clouds"),802==a&&(b="scattered-clouds"),803==a&&(b="broken-clouds"),804==a&&(b="overcast-clouds")):a>=600&&a<=622?b="snow":a>=200&&a<=232?b="thunderstorm":a>=900&&a<=906&&(904==a&&(b="hot"),905==a&&(b="windy"));var c="url('img/"+b+".jpg')";document.body.style.backgroundImage=c}locationRequest();